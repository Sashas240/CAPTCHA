<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>WebApp Капча</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  body { font-family: Arial; text-align: center; margin-top: 50px; }
  #captcha-box { width:150px; height:150px; margin: auto; border: 3px solid #ccc; border-radius:8px; position:relative; cursor:pointer; }
  #captcha-box.hovered { border-color:#4caf50; background:#e8f5e9; }
  #checkmark { display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:90px; color:#4caf50; }
  #captcha-box.checked #checkmark { display:block; }
  #continue-btn { margin-top:30px; padding:12px 30px; font-size:18px; border:none; border-radius:6px; background:#ccc; color:#555; cursor:not-allowed; }
  #continue-btn.enabled { background:#4caf50; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<h2>Пожалуйста, пройдите капчу</h2>
<p>Наведи на квадрат и нажми на него</p>

<div id="captcha-box">
  <div id="checkmark">&#10004;</div>
</div>
<button id="continue-btn" disabled>Продолжить</button>

<script>
  const box = document.getElementById('captcha-box');
  const btn = document.getElementById('continue-btn');
  let hovered = false, checked = false;

  box.addEventListener('mouseenter', () => { if (!checked) { hovered = true; box.classList.add('hovered'); }});
  box.addEventListener('mouseleave', () => { if (!checked) { hovered = false; box.classList.remove('hovered'); }});
  box.addEventListener('click', () => {
    if (hovered && !checked) {
      checked = true; box.classList.remove('hovered'); box.classList.add('checked');
      btn.disabled = false; btn.classList.add('enabled');
    }
  });

  btn.addEventListener('click', () => {
    if (checked && window.Telegram?.WebApp) {
      Telegram.WebApp.sendData("пройдено");
    } else {
      alert("Капча пройдена!");
    }
  });
</script>

</body>
</html>
